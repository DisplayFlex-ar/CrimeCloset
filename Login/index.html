<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Crime Closet</title>
  <link rel="icon" type="image/x-icon" href="../assets/Logo.png">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'>
<link rel='stylesheet' href='https://unicons.iconscout.com/release/v2.1.9/css/unicons.css'><link rel="stylesheet" href="./style.css">
<script src="https://accounts.google.com/gsi/client" async defer></script>
<meta name="referrer" content="strict-origin-when-cross-origin" />

</head>
<body>
<a href="/home">
		<img src="./crime-closet-high-resolution-logo-color-on-transparent-background.png" height="60px" class="logo"></a>
			
				<div class="col-12 text-center align-self-center py-5">
					<div class="section pb-5 pt-5 pt-sm-2 text-center">
						<h6 class="mb-0 pb-3"><span>Log In </span><span>Sign Up</span></h6>
			          	<input class="checkbox" type="checkbox" id="reg-log" name="reg-log"/>
			          	<label for="reg-log"></label>
						<div class="card-3d-wrap mx-auto">
							<div class="card-3d-wrapper">
								<div class="card-front">
									<div class="center-wrap">
										<div class="section text-center">
											<h4 class="mb-4 pb-3">Log In</h4>
											<form id="sub">
											<div class="form-group">
												<input type="email" class="form-style"
												placeholder="Your Email" id="logemail" autocomplete="off" required>
												<i class="input-icon uil uil-at"></i>
											</div>	
											<div class="form-group mt-2">
												<input type="password" class="form-style" placeholder="Your Password" id="logpass" autocomplete="off"
												required>
												<i class="input-icon uil uil-lock-alt"></i>
											</div>
											<div class="goog">
											<button type="submit" class="btn mt-4" id = "submit">Submit</button>
											<div id="g_id_onload"
     data-client_id="444589849573-4qpr24rfbts7ql98tacmbgaqkjfg64ig.apps.googleusercontent.com"
     data-context="signin"
     data-ux_mode="popup"
       data-callback="handleCredentialResponse"
       data-auto_prompt="false">
</div>

<div class="g_id_signin goog1"
     data-type="standard"
     data-shape="pill"
     data-theme="filled_black"
     data-text="signin"
     data-size="medium"
     data-logo_alignment="left"
     data-width="90">
</div></div>
											</form>
				      					</div>
			      					</div>
			      				</div>
								<div class="card-back">
									<div class="center-wrap">
										<div class="section text-center">
											<h4 class="mb-4 pb-3">Sign Up</h4>
											<form id="sig">
											<div class="form-group">
												<input type="text" class="form-style" placeholder="Your Full Name" id="logname" autocomplete="off" required>
												<i class="input-icon uil uil-user"></i>
											</div>	
											<div class="form-group mt-2">
												<input type="email" class="form-style" placeholder="Your Email" id="email-signup" autocomplete="off" required>
												<i class="input-icon uil uil-at"></i>
											</div>	
										
											<div class="form-group mt-2">
												<input type="password" class="form-style" placeholder="Your Password" id="password-signup" autocomplete="off" required>
												<i class="input-icon uil uil-lock-alt"></i>
											</div>
											<div class="form-group mt-2">
												<input type="password" class="form-style" placeholder="Confirm Password" id="confirm-password-signup" autocomplete="off" required>
												<i class="input-icon uil uil-lock-alt"></i>
											</div>
											<div class="goog">
											<button type="submit" class="btn mt-4" id = "create-acct-btn">Submit</button>&nbsp;
											<div id="g_id_onload"
     data-client_id="444589849573-4qpr24rfbts7ql98tacmbgaqkjfg64ig.apps.googleusercontent.com"
     data-context="signin"
     data-ux_mode="popup"
       data-callback="handleCredentialResponse"
       data-auto_prompt="false">
</div>

<div class="g_id_signin goog1"
     data-type="standard"
     data-shape="pill"
     data-theme="filled_black"
     data-text="signin"
     data-size="medium"
     data-logo_alignment="left"
     data-width="90">
</div></div>
										</form>
				      					</div>
			      					</div>
			      				</div>
			      			</div>
			      		</div>
			      	</div>
		      	</div>
            <script>
              window.handleCredentialResponse = () => {
                window.location.href = "/homepage/index.html";

}
            </script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDH2bx5med5nlXUdILFWm6Yo46x1oF64hg",
  authDomain: "logging-5e397.firebaseapp.com",
  projectId: "logging-5e397",
  storageBucket: "logging-5e397.appspot.com",
  messagingSenderId: "1040782791632",
  appId: "1:1040782791632:web:4c71cec6b3ada441811fd5"
};

const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const auth = getAuth(app);
const form = document.getElementById('sub')

form.onsubmit = (e) => {
  e.preventDefault()
  email = emailInput.value;
  password = passwordInput.value;
  signInWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
      // Signed in
      const user = userCredential.user;
      window.location.href = "/homepage/index.html";
      // ...
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
	  window.alert(error.message);
    });
}

const form1 = document.getElementById('sig')
form1.onsubmit = (e) => {
  e.preventDefault()
  var isVerified = true;

  signupEmail = signupEmailIn.value;
  signupPassword = signupPasswordIn.value;
  confirmSignUpPassword = confirmSignUpPasswordIn.value;
  if(signupEmail == null || signupPassword == null || confirmSignUpPassword == null) {
    window.alert("Please fill out all required fields.");
    isVerified = false;
  }
  if(signupPassword != confirmSignUpPassword) {
      window.alert("Password fields do not match. Try again.")
      isVerified = false;
  }
  if(isVerified) {
    createUserWithEmailAndPassword(auth, signupEmail, signupPassword)
      .then((userCredential) => {
      // Signed in 
      const user = userCredential.user;
      // ...
      window.alert("Account created. Proceed to login.");
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
      window.alert(error.message);
    });
  }
}

const emailInput = document.getElementById("logemail");
const passwordInput = document.getElementById("logpass");
const main = document.getElementById("main");
const signupEmailIn = document.getElementById("email-signup");
const signupPasswordIn = document.getElementById("password-signup");
const confirmSignUpPasswordIn = document.getElementById("confirm-password-signup");
const createacctbtn = document.getElementById("create-acct-btn");

var email, password, signupEmail, signupPassword,confirmSignUpPassword;


	</script>

</body>
</html>
